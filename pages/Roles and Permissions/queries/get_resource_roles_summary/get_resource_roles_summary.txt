SELECT
  r.resource_id,
  r.resource_full_name,
  r.resource_email,
  ro.role_id,
  ro.role_name,
  COUNT(p.permission_id)                                   AS perm_count,
  GROUP_CONCAT(p.permission_name ORDER BY p.permission_name SEPARATOR ', ') AS perm_list
FROM resources r
JOIN roles ro              ON ro.role_id = r.role_id                 -- only resources with a role
JOIN role_permissions rp   ON rp.role_id = ro.role_id                -- only roles that have permissions
JOIN permissions p         ON p.permission_id = rp.permission_id
WHERE COALESCE(r.resource_is_active, 1) = 1
GROUP BY r.resource_id, r.resource_full_name, r.resource_email, ro.role_id, ro.role_name
HAVING perm_count > 0
ORDER BY r.resource_full_name;
