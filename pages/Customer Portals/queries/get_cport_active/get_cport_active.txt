SELECT
  cp.customer_portal_id,
  cp.customer_id,
  c.customer_name,
  cp.customer_contact_id,
  cc.customer_contact_name,
  cp.customer_portal_name,
  cp.customer_portal_credentials,
  cp.customer_portal_website,
  cp.customer_portal_notes,
  cp.customer_portal_first_update,
  cp.customer_portal_last_update,
  cp.customer_portal_next_update,
  cp.customer_portal_status,
  cp.created_at,
  cp.updated_at
FROM customer_portals cp
JOIN customers c              ON c.customer_id = cp.customer_id
LEFT JOIN customer_contacts cc ON cc.customer_contact_id = cp.customer_contact_id
WHERE COALESCE(cp.customer_portal_status,'Active') = 'Active'
ORDER BY cp.customer_portal_id DESC;
