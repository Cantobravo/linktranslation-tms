SELECT COUNT(*) AS total
FROM resources r
WHERE
  COALESCE(r.resource_is_active, 1) = 1
  AND (
    {{ sel_wt_filter.selectedOptionValue ? 0 : 1 }} = 1
    OR EXISTS (
      SELECT 1
      FROM work_team_members wtm
      WHERE wtm.resource_id = r.resource_id
        AND COALESCE(wtm.is_active, 1) = 1
        AND wtm.work_team_id = {{ sel_wt_filter.selectedOptionValue || null }}
    )
  );
