UPDATE customer_quotes
SET
  customer_quote_name = COALESCE({{ j_cquote_upd_jsn.formData.customer_quote_name }}, customer_quote_name),
  customer_id = COALESCE(NULLIF({{ j_cquote_upd_jsn.formData.customer_id }}, ''), customer_id),
  customer_contact_id = COALESCE(NULLIF({{ j_cquote_upd_jsn.formData.customer_contact_id }}, ''), customer_contact_id),
  currency_id = COALESCE(NULLIF({{ j_cquote_upd_jsn.formData.currency_id }}, ''), currency_id),
  quote_amount = COALESCE({{ j_cquote_upd_jsn.formData.quote_amount }}, quote_amount),
  customer_quote_start_date = COALESCE(NULLIF({{ j_cquote_upd_jsn.formData.customer_quote_start_date ? moment(j_cquote_upd_jsn.formData.customer_quote_start_date).format('YYYY-MM-DD') : '' }}, ''), customer_quote_start_date),
  customer_quote_last_contact_date = COALESCE(NULLIF({{ j_cquote_upd_jsn.formData.customer_quote_last_contact_date ? moment(j_cquote_upd_jsn.formData.customer_quote_last_contact_date).format('YYYY-MM-DD') : '' }}, ''), customer_quote_last_contact_date),
  customer_quote_next_contact_date = COALESCE(NULLIF({{ j_cquote_upd_jsn.formData.customer_quote_next_contact_date ? moment(j_cquote_upd_jsn.formData.customer_quote_next_contact_date).format('YYYY-MM-DD') : '' }}, ''), customer_quote_next_contact_date),
  quote_notes = COALESCE({{ j_cquote_upd_jsn.formData.quote_notes }}, quote_notes),
  customer_quote_status = COALESCE({{ j_cquote_upd_jsn.formData.customer_quote_status }}, customer_quote_status),
  quote_is_active = COALESCE(NULLIF({{ j_cquote_upd_jsn.formData.quote_is_active }}, ''), quote_is_active),
  updated_at = NOW()
WHERE customer_quote_id = {{ appsmith.store.cquoteRow?.customer_quote_id }};
